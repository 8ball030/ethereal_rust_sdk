# Review Notes ‚Äî Follow-up Audit of `ethereal_rust_sdk`

**Context:** –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∞—É–¥–∏—Ç SDK –ø–æ—Å–ª–µ –ø—Ä–∞–≤–æ–∫ –≤ –æ—Ç—á—ë—Ç–µ  
**Reviewed file:** `ethereal_rust_sdk_followup_audit_report.md`  
**Role:** –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π —Ä–µ–≤—å—é–≤–µ—Ä (audit review, not author)  
**Date:** 2026-02-02

---

## –ò—Ç–æ–≥–æ–≤—ã–π –≤–µ—Ä–¥–∏–∫—Ç

**–û–±—â–∏–π –≤—ã–≤–æ–¥:** –∏–∑–º–µ–Ω–µ–Ω–∏—è **—É–ª—É—á—à–∏–ª–∏ –æ—Ç—á—ë—Ç**, —Ä–µ–≥—Ä–µ—Å—Å–∏–π –Ω–µ—Ç.  
–î–æ–∫—É–º–µ–Ω—Ç —Å—Ç–∞–ª:
- –±–æ–ª–µ–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–º,
- –±–æ–ª–µ–µ ‚Äúaudit-grade‚Äù,
- –±–æ–ª–µ–µ –ø–æ–ª–µ–∑–Ω—ã–º –¥–ª—è –∑–∞–∫–∞–∑—á–∏–∫–∞.

–û—Ç—á—ë—Ç **–º–æ–∂–Ω–æ –æ—Ç–¥–∞–≤–∞—Ç—å**, –Ω–æ –µ—Å—Ç—å **2 –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–µ—Ñ–µ–∫—Ç–∞**, –∫–æ—Ç–æ—Ä—ã–µ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –ø–æ–ø—Ä–∞–≤–∏—Ç—å, –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π.

---

## –ß—Ç–æ —Å—Ç–∞–ª–æ –ª—É—á—à–µ (–≤–∞–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å)

### 1. –†–∞–∑–¥–µ–ª *Verification of This Report*

–î–æ–±–∞–≤–ª–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ñ–æ—Ä–º–∞—Ç–∞:

> *Finding ‚Üí Location ‚Üí Verified*

‚Äî –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ. –û–Ω–∞:
- –ø–æ–≤—ã—à–∞–µ—Ç –¥–æ–≤–µ—Ä–∏–µ –∫ –∞—É–¥–∏—Ç—É,
- —Å–Ω–∏–º–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã ‚Äú–∞ –≤—ã —ç—Ç–æ —Ç–æ—á–Ω–æ —Å–º–æ—Ç—Ä–µ–ª–∏?‚Äù,
- –¥–µ–ª–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –ø—Ä–∏–≥–æ–¥–Ω—ã–º –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –æ—Å—Ç–∞–≤–∏—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

---

### 2. –†–∞–∑–¥–µ–ª *Additional Findings*

–ù–æ–≤—ã–µ –ø—É–Ω–∫—Ç—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ü–µ–Ω–Ω—ã–µ:

- `run_till_event().await.unwrap()` ‚Üí –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π panic  
- –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–æ–∫  
- unbounded `tokio::spawn` –≤ callback‚Äô–∞—Ö  
- –ø–∞–Ω–∏–∫–∞ –ø—Ä–∏ `register_*` –ø–æ—Å–ª–µ `connect()` –∏–∑-–∑–∞ `.take()` builder-–ø–∞—Ç—Ç–µ—Ä–Ω–∞

–≠—Ç–æ **—Ä–µ–∞–ª—å–Ω—ã–µ production-—Ä–∏—Å–∫–∏**, –∏ –∏—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —É—Å–∏–ª–∏–ª–æ –æ—Ç—á—ë—Ç.

---

## –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

### –ü—Ä–æ–±–ª–µ–º–∞ A ‚Äî —Å–ª–æ–º–∞–Ω–Ω—ã–π code snippet –≤ —Å–µ–∫—Ü–∏–∏ 2.3

–í —Ç–µ–∫—Å—Ç–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –±–ª–æ–∫:

```text
And on connect/reconnect, the client iterates `subscriptions` and re-emits them:

```rust
None
```
```

–≠—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —Å–±–æ–π –∫–æ–ø–∏–ø–∞—Å—Ç–∞ / –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ **–ø–æ–¥—Ä—ã–≤–∞–µ—Ç –¥–æ–≤–µ—Ä–∏–µ** –∫ –¥–æ–∫—É–º–µ–Ω—Ç—É.

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**
- –∑–∞–º–µ–Ω–∏—Ç—å `None` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∏–∑ `connect_cb`, –Ω–∞–ø—Ä–∏–º–µ—Ä —Å—Ç—Ä–æ–∫—É –≤–∏–¥–∞:
  - `socket.emit("subscribe", Payload::from(sub.to_string()))`

---

### –ü—Ä–æ–±–ª–µ–º–∞ B ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç P0 –¥–ª—è `register_* after connect`

–í —Å–µ–∫—Ü–∏–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ —É–∫–∞–∑–∞–Ω–æ:

> ‚Äúdocument that register_* and subscribe_* must be called before connect(), or allow registration after connect without panic‚Äù

–≠—Ç–æ **–Ω–µ –≤—Å–µ–≥–¥–∞ P0**.

–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:

- –ï—Å–ª–∏ SDK **—è–≤–Ω–æ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç builder-–ø–∞—Ç—Ç–µ—Ä–Ω** (‚Äú–≤—Å–µ register –¥–æ connect‚Äù) ‚Äî  
  —ç—Ç–æ –¥–æ–ø—É—Å—Ç–∏–º—ã–π API-–∫–æ–Ω—Ç—Ä–∞–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ:
  - –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å,
  - –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–ø–∞–º–∏ (`WsClientBuilder ‚Üí build ‚Üí connect`).
- –ï—Å–ª–∏ SDK –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –∫–∞–∫ runtime-mutable ‚Äî —Ç–æ–≥–¥–∞ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ P0.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –ª–∏–±–æ –ø–æ–Ω–∏–∑–∏—Ç—å —ç—Ç–æ—Ç –ø—É–Ω–∫—Ç –¥–æ **P1**,
- –ª–∏–±–æ –æ—Å—Ç–∞–≤–∏—Ç—å –≤ P0, –Ω–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å:
  > ‚ÄúP0 only if post-connect registration is expected to be supported.‚Äù

---

## –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –ø–æ–ª–µ–∑–Ω–æ)

### 1. –£–∫–æ—Ä–æ—Ç–∏—Ç—å –±–æ–ª—å—à–∏–µ code snippets

–í —Å–µ–∫—Ü–∏–∏ —Å `connect()` –≤—Å—Ç–∞–≤–ª–µ–Ω –¥–æ–≤–æ–ª—å–Ω–æ –¥–ª–∏–Ω–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏.  
–î–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ:
- –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ 10‚Äì20 —Å—Ç—Ä–æ–∫ –≤–æ–∫—Ä—É–≥ –ª–æ–≥–∏–∫–∏ reconnect/resubscribe.

---

### 2. –Ø–≤–Ω–æ –ø–æ–º–µ—Ç–∏—Ç—å dual-impact findings

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—É–Ω–∫—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, unbounded `tokio::spawn`) –≤–ª–∏—è—é—Ç **–∏ –Ω–∞ latency, –∏ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å**.

–ú–æ–∂–Ω–æ —É—Å–∏–ª–∏—Ç—å —è—Å–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π:
> ‚ÄúThis is both a correctness (resource exhaustion) and p99/p999 latency concern.‚Äù

---

## –§–∏–Ω–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥

- ‚ùå –†–µ–≥—Ä–µ—Å—Å–∏–π –Ω–µ—Ç  
- ‚úÖ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –æ—Ç—á—ë—Ç–∞ –≤—ã—Ä–æ—Å–ª–∞  
- ‚ö†Ô∏è –ï—Å—Ç—å –æ–¥–∏–Ω —è–≤–Ω—ã–π –¥–µ—Ñ–µ–∫—Ç (`None` –≤–º–µ—Å—Ç–æ snippet), –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å  
- üü° –û–¥–∏–Ω –ø—É–Ω–∫—Ç –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ —Å—Ç–æ–∏—Ç —É—Ç–æ—á–Ω–∏—Ç—å

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –º–µ–ª–∫–∏—Ö –ø—Ä–∞–≤–æ–∫ –æ—Ç—á—ë—Ç –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å **—Ñ–∏–Ω–∞–ª—å–Ω–æ–π, –≥–æ—Ç–æ–≤–æ–π –∫ –ø–µ—Ä–µ–¥–∞—á–µ –≤–µ—Ä—Å–∏–µ–π**.

---

*These notes are intended as a reviewer addendum and can be archived together with the main audit report.*
